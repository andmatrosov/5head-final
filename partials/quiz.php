<?php
/**
 * @var array $langarr;
 * @var string $link;
 */
$quiz = [
    'questions' => [
        [
            'video' => "01",
            'timestamps' => [10, 12.5, 16, 21],
            'question' => [
                'text' => $langarr['quiz']['questions'][0]['question'],
                'isHard' => false,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][0]['answers']['a'],
                    'correct' => false
                ],
                'b' =>  [
                    'text' => $langarr['quiz']['questions'][0]['answers']['b'],
                    'correct' => true
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][0]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][0]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "02",
            'timestamps' => [8, 10.5, 14, 17],
            'question' => [
                'text' => $langarr['quiz']['questions'][1]['question'],
                'isHard' => false,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][1]['answers']['a'],
                    'correct' => true
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][1]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][1]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][1]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "03",
            'timestamps' => [8, 10.5, 12.5, 15.5],
            'question' => [
                'text' => $langarr['quiz']['questions'][2]['question'],
                'isHard' => false,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][2]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][2]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][2]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][2]['answers']['d'],
                    'correct' => true
                ]
            ]
        ],
        [
            'video' => "04",
            'timestamps' => [5.5, 8.5, 11, 14],
            'question' => [
                'text' => $langarr['quiz']['questions'][3]['question'],
                'isHard' => false,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][3]['answers']['a'],
                    'correct' => true
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][3]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][3]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][3]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "05",
            'timestamps' => [7, 10.5, 12.5, 15],
            'question' => [
                'text' => $langarr['quiz']['questions'][4]['question'],
                'isHard' => true,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][4]['answers']['a'],
                    'correct' => false
                    ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][4]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][4]['answers']['c'],
                    'correct' => true
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][4]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "06",
            'timestamps' => [6.5, 9, 11.5, 14],
            'question' => [
                'text' => $langarr['quiz']['questions'][5]['question'],
                'isHard' => false,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][5]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][5]['answers']['b'],
                    'correct' => true
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][5]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][5]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "07",
            'timestamps' => [10.5, 12.5, 15, 18],
            'question' => [
                'text' => $langarr['quiz']['questions'][6]['question'],
                'isHard' => true,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][6]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][6]['answers']['b'],
                    'correct' => true
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][6]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][6]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "08",
            'timestamps' => [8, 10.5, 13, 15.5],
            'question' => [
                'text' => $langarr['quiz']['questions'][7]['question'],
                'isHard' => true,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][7]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][7]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][7]['answers']['c'],
                    'correct' => true
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][7]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "09",
            'timestamps' => [7.5, 10.5, 12.5, 14.5],
            'question' => [
                'text' => $langarr['quiz']['questions'][8]['question'],
                'isHard' => true,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][8]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' =>  $langarr['quiz']['questions'][8]['answers']['b'],
                    'correct' => true
                ],
                'c' => [
                    'text' =>  $langarr['quiz']['questions'][8]['answers']['c'],
                    'correct' => false
                ],
                'd' => [
                    'text' =>  $langarr['quiz']['questions'][8]['answers']['d'],
                    'correct' => false
                ]
            ]
        ],
        [
            'video' => "10",
            'timestamps' => [8.5, 11, 13, 15.5],
            'question' => [
                'text' => $langarr['quiz']['questions'][9]['question'],
                'isHard' => true,
            ],
            'answers' => [
                'a' => [
                    'text' => $langarr['quiz']['questions'][9]['answers']['a'],
                    'correct' => false
                ],
                'b' => [
                    'text' => $langarr['quiz']['questions'][9]['answers']['b'],
                    'correct' => false
                ],
                'c' => [
                    'text' => $langarr['quiz']['questions'][9]['answers']['c'],
                    'correct' => true
                ],
                'd' => [
                    'text' => $langarr['quiz']['questions'][9]['answers']['d'],
                    'correct' => false
                ]
            ]
        ]
    ],
    'steps' => [
        '-',
        '-',
        '-',
        '-',
        '$5 Promocode',
        '-',
        'M4A1-S | Nightmare',
        'AK-47 | Asiimov',
        'Skeleton Knife',
        'Talon Knife',
    ],
];
?>

<div class="quiz">
    <div class="container">
        <div class="quiz__wrapper">
            <div class="quiz__wrapper-slider">
                <div class="swiper js-quiz-wrapper-slider">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="quiz__test">
                                <div class="quiz__screen quiz__screen-start" style="<?= isset($_COOKIE['finished']) ? 'display: none' : '' ?>">
                                    <div class="quiz__screen-content">
                                        <h3>
                                            <?= $langarr['quiz']['start'] ?>
                                        </h3>
                                        <button class="button js-start" type="button"><?= $langarr['buttons']['checkKnowledge'] ?></button>
                                    </div>
                                </div>
                                <div class="quiz__screen quiz__screen-finish" style="<?= isset($_COOKIE['finished']) ? '' : 'display: none'  ?>">
                                    <div class="quiz__screen-content">
                                        <h3>
                                            <?= $langarr['quiz']['finish'] ?>
                                        </h3>
                                        <a class="button" href="<?= $link ?>" target="_blank"><?= $langarr['buttons']['getBonus'] ?></a>
                                    </div>
                                </div>
                                <div class="quiz__test-slider" style="display: none;">
                                    <div class="swiper">
                                        <div class="swiper-wrapper">
                                            <?php foreach( $quiz['questions'] as $i => $question ): ?>
                                                <div class="swiper-slide">
                                                    <div class="quiz__test-item">
                                                        <video
                                                            class="quiz__video"
                                                            playsinline
                                                            disablepictureinpicture
                                                            disableremoteplayback
                                                            aria-hidden="true"
                                                            data-src-horizontal="video/horizontal/<?= $question['video'] ?>.webm"
                                                            data-src-vertical="video/vertical/<?= $question['video'] ?>.webm"
                                                            poster="images/quiz/poster-hor.jpg"
                                                        ></video>

                                                        <div class="quiz__question" data-question="<?= $i ?>">
                                                            <div class="quiz__hints">
                                                                <button type="button" class="quiz__hints-half" disabled>
                                                                </button>
                                                                <button type="button" class="quiz__hints-call" disabled>
                                                                </button>
                                                            </div>
                                                            <div class="quiz__question-top">
                                                                <?= $question['question']['text'] ?>
                                                            </div>
                                                            <div class="quiz__answers">

                                                                <?php foreach( $question['answers'] as $key => $answer ): ?>
                                                                    <button class="quiz__answers-item" type="button" data-option="<?= $key ?>" disabled>
                                                                        <span><?= $key ?>:</span>
                                                                        <span class="quiz__answers-text hidden"><?= $answer['text'] ?></span>
                                                                    </button>
                                                                <?php endforeach; ?>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            <?php endforeach; ?>
                                        </div>
                                    </div>
                                </div>

                                <div class="quiz__timer">
                                    <div id="sec">00</div>
                                    :
                                    <div id="msec">00</div>
                                </div>
                            </div>
                        </div>

                        <div class="swiper-slide">
                            <div class="quiz__steps">
                                <div class="quiz__steps-inner">
                                    <ul class="quiz__steps-list">
                                        <?php
                                        $step = 10;
                                        foreach(array_reverse($quiz['steps']) as $key => $step): ?>
                                            <li class="quiz__steps-item">
                                                <span><?= str_pad(count($quiz['steps']) - $key, 2, '0', STR_PAD_LEFT) ?></span>
                                                <span><?= $step ?></span>
                                            </li>
                                        <?php endforeach; ?>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    window.quiz = <?= json_encode($quiz) ?>;
</script>